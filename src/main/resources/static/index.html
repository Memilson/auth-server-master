<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auth Server - Login</title>
    <link rel="stylesheet" href="css/app.css">
</head>
<body>
<div class="wrap">
    <section class="hero">
        <p class="eyebrow">Auth Server</p>
        <h1>Faça login e teste os recursos protegidos</h1>
        <p class="lede">
            Esta página consome os endpoints OAuth2 do servidor. O interceptor de requisições aplica o token
            automaticamente e valida a sessão antes de cada chamada.
        </p>
    </section>

    <section class="card" id="login-card">
        <div class="card-header">
            <div>
                <p class="eyebrow">Credenciais do usuário</p>
                <h2>Entrar</h2>
            </div>
            <div class="badge">Password Grant</div>
        </div>

        <div id="message" class="message message-info hidden"></div>

        <form id="login-form" class="form">
            <label for="username">Usuário</label>
            <input id="username" name="username" type="text" autocomplete="username" placeholder="email/login" required>

            <label for="password">Senha</label>
            <input id="password" name="password" type="password" autocomplete="current-password" placeholder="senha" required>

            <button id="login-btn" type="submit" class="btn primary">Entrar</button>
        </form>

        <div class="hint">
            Cliente OAuth2 configurado: <span class="mono">teste / 123456</span>
        </div>
    </section>

    <section class="card hidden" id="session-card">
        <div class="card-header">
            <div>
                <p class="eyebrow">Sessão</p>
                <h2>Status do token</h2>
            </div>
            <div id="token-status" class="badge">–</div>
        </div>

        <div class="session-grid">
            <div>
                <p class="muted">Usuário</p>
                <p class="strong" id="current-user">–</p>
            </div>
            <div>
                <p class="muted">Escopos</p>
                <p class="strong" id="current-scopes">–</p>
            </div>
            <div>
                <p class="muted">Expira em</p>
                <p class="strong" id="expires-at">–</p>
            </div>
        </div>

        <div class="actions">
            <button id="validate-btn" class="btn ghost">Validar token</button>
            <button id="ping-btn" class="btn">Chamar /manager/ok</button>
            <button id="logout-btn" class="btn danger ghost">Sair</button>
        </div>

        <pre id="resource-result" class="result muted">Use o botão para testar um endpoint protegido.</pre>
    </section>
</div>

<script src="js/app.js"></script>
</body>
</html>
